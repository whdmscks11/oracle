-- 현재 시간을 얻는 함수 
SELECT SYSDATE, CURRENT_DATE, SYSTIMESTAMP, CURRENT_TIMESTAMP FROM DUAL;

-- 날짜 시간 포멧 설정
ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD HH24:MI:SS';

-- CURRENT_TIMESTAMP 의 시간대를 변경하는 함수
ALTER SESSION SET TIME_ZONE = '09:00';

-- 날짜 추출함수 
SELECT EXTRACT(YEAR FROM SYSDATE)FROM DUAL;
SELECT EXTRACT(DAY FROM CURRENT_DATE) FROM DUAL;
SELECT EXTRACT(MINUTE FROM CURRENT_TIMESTAMP)FROM DUAL;

UPDATE MEMBER SET REGDATE = '2012/03/26 09.10.23' WHERE ID = 'dokdo';
UPDATE MEMBER SET REGDATE = '2020/11/16 13.08.56' WHERE ID = 'daemado';
UPDATE MEMBER SET REGDATE = '2018/12/01 20.44.37' WHERE ID = 'whdmscks11';
UPDATE MEMBER SET REGDATE = '2015/06/28 16.52.11' WHERE ID = 'joseph88';
UPDATE MEMBER SET REGDATE = '2014/01/17 08.02.13' WHERE ID = 'whdns';
COMMIT;
SELECT REGDATE FROM MEMBER;

-- 회원 중 가입 월이 2,3,11,12월인 회원의 모든 정보 조회
SELECT * FROM MEMBER WHERE EXTRACT(MONTH FROM REGDATE) IN(2,3,11,12);
-- 회원 중 가입 월이 2,3,11,12월이면서 가입 년도가 2020 이전인 회원의 모든 정보 조회
SELECT * FROM MEMBER WHERE EXTRACT(MONTH FROM REGDATE) IN(2,3,11,12) AND EXTRACT(YEAR FROM REGDATE) < 2020;
-- 회원 중 가입한지 10년 이상인 회원의 모든 정보 조회
SELECT * FROM MEMBER WHERE EXTRACT(YEAR FROM REGDATE) <= EXTRACT(YEAR FROM ADD_MONTHS(SYSDATE, -120));
SELECT * FROM MEMBER WHERE ADD_MONTHS(SYSDATE, -120) >= REGDATE;
SELECT * FROM MEMBER WHERE ROUND(MONTHS_BETWEEN(SYSDATE, REGDATE)) > 120;

-- 현재 날짜(요일) 기준, 다음 '토요일'의 날짜는?
SELECT NEXT_DAY(SYSDATE, '토요일') FROM DUAL;
SELECT NEXT_DAY(SYSDATE, '토') FROM DUAL;
SELECT NEXT_DAY(SYSDATE, 7) FROM DUAL; -- 1(일요일) - 7(토요일)

-- 현재 달의 마지막 날의 날짜는?
SELECT LAST_DAY(SYSDATE) FROM DUAL;
-- 다음 달의 마지막 날의 날짜는?
SELECT LAST_DAY(ADD_MONTHS(SYSDATE, 1)) FROM DUAL;

-- 포멧 : ‘CC’ , ‘YEAR’ , ‘Q’ , ‘MONTH’ , ‘W’ , ‘DAY’ , ‘D’ , ‘HH’ , ‘MI’
SELECT ROUND(TO_DATE('2051-02-03'), 'CC'), TRUNC(TO_DATE('2051-02-03'), 'CC') FROM DUAL; -- 0~50년 = 해당 세기 1년 / 51~99년 = 다음 세기 1년
SELECT ROUND(TO_DATE('2045-07-03'), 'YEAR'), TRUNC(TO_DATE('2045-07-03'), 'YEAR') FROM DUAL; -- 1~6월 = 해당 년도 1월 / 7~12월 = 다음 년도 1월 
SELECT ROUND(TO_DATE('2045-02-03'), 'Q'), TRUNC(TO_DATE('2045-06-03'), 'Q') FROM DUAL; -- 1~3 = 1 / 4~6 = 4 / 7~9 = 7 / 10~12 = 10
SELECT ROUND(TO_DATE('2045-08-03'), 'Q'), TRUNC(TO_DATE('2045-12-03'), 'Q') FROM DUAL; 
SELECT ROUND(TO_DATE('2045-02-16'), 'MONTH'), TRUNC(TO_DATE('2045-04-15'), 'MONTH') FROM DUAL; -- 15일이하 = 1일 / 16일이상 = 다음달 1일 
SELECT ROUND(TO_DATE('2045-02-09'), 'W'), TRUNC(TO_DATE('2045-04-06'), 'W') FROM DUAL; -- 1~7 = 1 / 8~14 = 8
